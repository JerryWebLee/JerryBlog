---
uuid: 1a8564b5-a153-451a-8445-e6b9272c02f5
title: Git常用命令及常见场景下的Git操作
layout: post
comments: true
toc: true
date: 2021-05-23 10:58:30
tags: Git
categories: 前端
---

### Git四大分区

- 工作区(Working Area)
- 暂存区(Stage)
- 本地仓库(Local Repository)
- 远程仓库(Remote Repository)

------

### Git常用命令列表

|                            `命令`                            | `含义`                                                       |
| :----------------------------------------------------------: | :----------------------------------------------------------- |
|                          `git init`                          | 初始化                                                       |
|                      `git clone [url]`                       | 复制远程仓库到本地                                           |
|               `git remote add [origin] [url]`                | 将本地仓库关联到远程仓库                                     |
|                    `git remote rm [name]`                    | 删除远程仓库                                                 |
|         `git remote set-url --push [name] [newUrl]`          | 修改远程仓库                                                 |
|          `git pull [remoteName] [localBranchName]`           | 拉取远程仓库                                                 |
|          `git push [remoteName] [localBranchName]`           | 推送到远程仓库                                               |
|          `git push origin [localBranchName]:master`          | 提交本地分支`localBranchName`作为远程的`master`分支          |
| `git push origin [localBranchName]:[localBranchName]`<br />或者<br />`git push origin [localBranchName]` | 提交本地分支`localBranchName`作为远程的`localBranchName`分支 |
|                         `git branch`                         | 查看本地分支                                                 |
|                       `git branch -a`                        | 查看本地分支和远程分支                                       |
|                       `git branch -r`                        | 查看远程分支                                                 |
|                     `git branch [name]`                      | 创建本地分支,创建后并不会切换到该分支                        |
|                   `git checkout -b [name]`                   | 创建本地分支并切换到该分支                                   |
|                    `git checkout [name]`                     | 切换到该分支                                                 |
|                     `git merge [name] `                      | 合并该分支到当前分支                                         |
|                   `git push origin [name]`                   | 将本地分支推送到远程分支                                     |
|               `git push origin :heads/[name]`                | 删除`name`远程分支                                           |
|                          `git tag`                           | 查看所有`tag`信息                                            |
|                       `git tag [name]`                       | 创建`tag`标签                                                |
|                     `git tag -d [name]`                      | 删除`tag`标签                                                |
|                         `git tag -r`                         | 查看远程tag标签                                              |
|                   `git push origin [tag]`                    | 推送本地`tag`到远程仓库                                      |
|             `git push origin :refs/tags/[name]`              | 删除远程标签                                                 |
|                       `git commit -v`                        | 当你用`-v`参数的时候可以看commit的差异                       |
|                   `git pull origin --tags`                   | 合并远程`tag`到本地                                          |
|                   `git push origin --tags`                   | 推送本地tag到远程仓库                                        |
|            `git tag -a [name] -m ['yourMessage']`            | 创建带注释的`tag`                                            |
|                         `git status`                         | 查看当前项目状态                                             |
|                         `git add .`                          | 暂存修改                                                     |
|             `git commint -a/-m ['yourMessage']`              | 提交修改                                                     |
|            `git commit --amend  ['yourMessage']`             | 对最近的一次提交注释信息进行修改，并重新提交                 |
|                   `git remote show origin`                   | 显示远程库`origin`里的资源                                   |
|              `git checkout --track origin/dev`               | 切换到远程`dev`分支                                          |
|                `git branch -D master develop`                | 删除本地库`develop`(未合并分支的强制删除)                    |
|                     `git rm [fileName]`                      | 从`git`中删除指定文件(从暂存区和工作区中删除)                |
|                     `git config --list`                      | 查看配置列表                                                 |
|                        `git ls-files`                        | 查看已经被提交的文件                                         |
|                      `git ls-files -s`                       | 查看保存在暂存区的文件,和hash值                              |
|             `git cat-file -p [暂存区文件hash值]`             | 显示保存在暂存区的文件的具体内容                             |
|                          `git log`                           | 查看你`commit`的日志                                         |
|                  `git log --pretty=oneline`                  | 显示提交信息到一行                                           |
|                          `git diff`                          | 查看尚未暂存的更新                                           |
|                 `git diff --cached/--staged`                 | 查看哪写文件已暂存还没有提交，并显示文件具体的修改内容       |
|                 `git rm --cached [fileName]`                 | 移除文件(只从暂存区中删除)                                   |
|                   `git rm -f [fileName] `                    | 强行移除修改后文件(从暂存区和工作区中删除)                   |
|          `git diff --cached 或 $ git diff --staged`          | 查看尚未提交的更新                                           |
|                       `git stash push`                       | 将文件给`push`到一个临时空间中                               |
|                       `git stash pop`                        | 将文件从临时空间`pop`下来                                    |
|                       `git stash list`                       | 查看未完成的任务保存在栈中的任务列表                         |
|                          `git pull`                          | 本地与服务器端同步                                           |
|                         `git fetch`                          | 相当于是从远程获取最新版本到本地，不会自动`merge`            |
|             `git commit -a -m ["log_message"] `              | (`-a`是提交所有改动，`-m`是加入log信息) 本地修改同步至服务器端 |
|               `git branch [branchName] master`               | 从主分支master创建`[branchName]`分支                         |
|      `git branch -m [oldBranchName]  [newBranchName] `       | 将`[oldBranchName]`修改为`[newBranchName]`                   |
|             `git checkout [branchName]/master `              | 切换到`[branchName]/master`分支                              |
|          `git config --global --unset[ user.name]`           | 删除全局配置的用户名                                         |
|          `git config --global --unset [user.email]`          | 删除全局配置的emai                                           |
|               `mv [oldFileName] [newFileName]`               | 文件重命名                                                   |
|                         `git reflog`                         | 查看之前所有的提交记录，包括已经被删除的，在`git log`中不显示的 |
|              `git stash apply stash [栈hash] `               | 根据存储在栈中的hash值取出未完成的任务                       |
|               `git remote set-head origin -d`                | 删除`origin/HEAD`指针，无影响                                |

`git checkout [newBranch]`使用注意:每次切换分支前，确保当前分支必须得是干净的;在切换分支时，如果当前分支上有未暂存的修改(第一次)或者有未提交的暂存(第一次),分支可以切换成功,但是这种操作可能会污染其他分支.

------

### git命令重命名(简化)

- `git lg`  --  格式化展示提交信息

  ```bash
  git config --global alias.lg "log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %C(bold blue)%s%Creset %Cgreen(%cr) <%an>%Creset' --abbrev-commit --date=relative"
  ```

  

- `git lga`  --  格式化展示提交信息(实现的操作同上,命令名为`lga`)

  ```bash
  git config --global alias.lga "log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %C(bold blue)%s%Creset %Cgreen(%cr) <%an>%Creset' --abbrev-commit --date=relative"
  ```

  

------

### 常见场景Git操作

#### 将当前修改的内容提交到新的分支上

```bash
# 步骤1：在当前分支上的修改暂存起来
git stash
# 步骤2：暂存修改后，在本地新建分支（new_branch为新分支的名字）
git checkout -b new_branch
# 步骤3：将暂存的修改放到新建分支中
git stash pop
# 步骤4：
git add .
git commit -m ['commit message']
# 步骤5：将提交的内容push到远程服务器
git push
```

`git stash`的作用是把工作区(必须是工作区中已经被`git`追踪到的文件)和索引中的内容暂时存到一个堆上，而且这个堆是和分支不相关的。切换分支后，依然可以看到并使用。

当正在进行项目中某一部分的工作处于一个比较杂乱的状态，而你想转到其他分支上进行一些工作。但你不想提交进行了一半的工作，否则以后你无法回到这个工作点。解决这个问题的办法就是`git stash`命令。

“‘储藏”可以获取你工作目录的中间状态——也就是你修改过的被追踪的文件和暂存的变更——并将它保存到一个未完结变更的堆栈中，随时可以重新应用。

#### 实际项目中的创建新分支及合并操作

```bash
# 步骤1:创建子分支
git checkout -b [newBranch]
# 步骤2:完成该分支的需求
# 步骤3:添加提交
git add .
git commit -m ['commit message']
# 返回主分支合并子分子
git checkout master
git merge [newBranch]
# 推送到远程仓库
git push

# 将子分支推送到远程仓库
# 记得推到远端之前先拉取最新代码
git pull
git checkout [newBranch]
git push origin [newBranch] / git push -u origin [newBranch]

# 如果远程分支没有创建关联,使用下面的代码创建远程分支并关联到本地分支
git branch --set-upstream [newBranch] origin/[newBranch]
```

------

> 详细内容请参考[git文档](https://git-scm.com/docs);如有错误请在右侧导航处邮件联系,或者在下方评论区指出.
>

